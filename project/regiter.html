<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>I购优选 网上购物商城</title>
<link rel="stylesheet" href="resgiter.css">
<link rel="stylesheet" href="public.css">   
<link rel="stylesheet" href="base.css">   
</head>
<body>
<div id="top">
    <div class="layout clear">
        <p>您好，欢迎来到I购优选，<a href="" class="active">请登录</a><a href="">免费注册</a></p>
        <div class="top-r clear">
            <a href="">我的账户</a>
            <span>|</span>
            <a href="">我的购物车</a>
            <span>|</span>
            <a href="">我的订单</a>
        </div>
    </div>   
</div>
<header class="layout clear">
    <div class="logo"><a href=""><img src="images/logo.png" alt=""></a></div>
    <div class="header-c"><input type="text" class="txt" name="key"><input type="button" value="搜索" class="btn"></div>
    <a href="" class="gocar"><img src="images/car (2).png" alt=""> 我的购物车<i>（0）</i>></a>
    <img src="images/erweima.png" alt="二维码" id="erma"/>
</header>


<div class="overlayer"></div>
<div class="loginBaner">
    <div class="m pr layout">
        <div class="loginBox pa">
            <div class="loginInset-hd">
                <ul class="loginInset-hdUl">
                    <li>
                        <h3>账户注册</h3>
                    </li>
                </ul>
                <a href="login.html" class="fr">已有账号，去登录</a>
            </div>
            <div class="loginInset-body pr">
                <div class="regC">
                    <form action="">
                        <div class="inputWrap" style="overflow: visible;">
                            <div class="inputBox">
                                <div class="inputIcon"></div>
                                <div class="inputK">
                                    <input type="text" value="" data-value="" name="uname" id="uname" placeholder="请输入您的手机号码" />
                                </div>
                            </div>
                            <div class="inputBox">
                                <div class="inputIcon inputIcon-psd"></div>
                                <div class="inputK">
                                    <input type="password" data-value="" name="psd" id="psd" placeholder="请输入密码" />
                                </div>
                            </div>
                            <div class="inputBox">
                                <div class="inputIcon inputIcon-psd2"></div>
                                <div class="inputK">
                                    <input type="password" data-value="" name="rpsd" id="rpsd" placeholder="请再次输入密码" />
                                </div>
                            </div>
                          
                            
                            
                            <input type="hidden" name="token" id="token" />
                            <input type="hidden" name="checkAddress" id="checkAddress" />
                            <input type="hidden" name="sid" id="sid" />
                            <div class="inputBox mt15">
                                <div class="inputIcon inputIcon-code"></div>
                                <div class="inputK inputKcode">
                                    <input type="text" class="txtCode" name="txtCode" id="txtCode" data-value="" placeholder="填写验证码" />
                                </div>
                                <div class="pCode ft14">
                                    <span>
                                        <em class="clorRed">
                                   <input type="button" id="btn" value=""/>
                                        </em></span>
                            <span>获取验证码</span>
                                </div>
                            </div>
                        </div>
                        <div class="agreeXy mt15">
                            <label for="agree">
                                <input type="checkbox" id="agreement" />我已经阅读并同意</label><a href="/about/detail/1002.html" class="agreeTextLink">《I购优选用户注册协议》</a>
                        </div>
                        <a href="javascript:;" id="btn_Sumit" class="btn">立即注册</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>













<footer>
        <div class="layout clear">
            <div class="footer-t">
                <div class="f1">
                    <ul>
                        <li class="te">用户帮助</li>
                        <li><a href="">注册新用户</a></li>
                        <li><a href="">交易条款协议</a></li>
                        <li><a href="">找回密码</a></li>
                        <li><a href="">联系我们</a></li>
                    </ul>
                </div>
                <div class="xian"></div>
                <div class="f1">
                    <ul>
                        <li class="te">购物指南</li>
                        <li><a href="">订购流程</a></li>
                        <li><a href="">验货与签收</a></li>
                        <li><a href="">订单配送及查询</a></li>
                        <li><a href="">积分使用规则</a></li>
                        </ul>
                </div>
                <div class="xian"></div>
                <div class="f1">
                    <ul>
                        <li class="te">支付及配送</li>
                        <li><a href="">支付方式</a></li>
                        <li><a href="">配送方式</a></li>
                    </ul>
                </div>
                <div class="xian"></div>
                <div class="f1">
                    <ul>
                        <li class="te">售后服务</li>
                        <li><a href="">退换货政策</a></li>
                        <li><a href="">退款流程</a></li>
                        <li><a href="">退款说明</a></li>
                        <li><a href="">我的售后服务</a></li>
                        <li><a href="">售后保障</a></li>
                    </ul>
                </div>
                <div class="xian"></div>
                <div class="f1 clear">
                    <div class="img">
                        <img src="images/erwima2.png" alt=""><br>
                        <p>微信二维码</p>
                    </div>               
                    <div class="tel">                    
                        <span>客服电话</span><br>
                        <i>7x24小时热线</i><br>
                        <span>400-136-7919</span>
                    </div>                
                </div>
            </div>
            
            <div class="footer-b">
                <div class="us">
                    <a href="">关于我们</a>
                    <span>|</span>
                    <a href="">免责条款</a>
                    <span>|</span>
                    <a href="">友情链接</a>
                    <span>|</span>
                    <a href="">网站地图</a>
                    <span>|</span>
                    <a href="">帮助中心</a>
                </div>
                <p class="cpy">Copyright © 2016I购优选 版权所有 粤ICP备16107992号-1 粤ICP备17165095号 深圳爱购优选电子商务有限公司</p>
            </div>
        </div>
    </footer>
    </body>
    
    <script>
        
       
        var ouser = document.getElementById("uname");
		var opass = document.getElementById("psd");
		var opass2 = document.getElementById("rpsd");
		var otex = document.getElementById("txtCode");
		var obtn = document.getElementById("btn_Sumit");
		
		var userOnOff = passOnOff = pass2OnOff = telOnOff = false;
		
		ouser.onblur = function(){

			var reg =  /^1[3-9]\d{9}$/;;
			if(reg.test(this.value)){
			
				userOnOff = true
			}else{
				alert("请输入正确的手机号")
				userOnOff = false
			}
		}
		

		opass.onblur = function(){
			var a=b=c=0;

			var lengthReg = /^.{6,18}$/;
			if(!lengthReg.test(this.value)){
				alert("长度不符") ;
				passOnOff = false
				return;
			}

			var numReg = /\d/;
			if(numReg.test(this.value)){
				a = 1;
			}

			var azReg = /[a-zA-Z]/;
			if(azReg.test(this.value)){
				b = 1;
			}

			var tsReg = /[\W_]/;
			if(tsReg.test(this.value)){
				c = 1;
			}
			
			
			passOnOff = true;
			

			if(opass2.value != ""){
				if(opass2.value == this.value){
									
					pass2OnOff = true
				}else{
					alert("两次输入的密码不一致")				
					pass2OnOff = false
				}
			}
		}
		

		opass2.onblur = function(){
			if(this.value === opass.value){
				// this.nextElementSibling.innerHTML = "一致"
				pass2OnOff = true
			}else{
				alert("两次输入的密码不一致")
				pass2OnOff = false
			}
		}
		

		// otex.onblur = function(){
		// 	var reg = /^1[3-9]\d{9}$/;
		// 	if(reg.test(this.value)){
		// 		this.nextElementSibling.innerHTML = "符合"
		// 		telOnOff = true
		// 	}else{
		// 		this.nextElementSibling.innerHTML = "不符合"
		// 		telOnOff = false
		// 	}
		// }

		obtn.onclick = function(){
			if(userOnOff && passOnOff && pass2OnOff && telOnOff){
				alert("全部成功")
			}else{
				alert("失败")
			}
		}



            class Register{
                constructor(){
                    this.user = document.querySelector("#uname");
                    this.pass = document.querySelector("#psd");
                    this.btn = document.querySelector("#btn_Sumit");
                    // this.msg = document.querySelector(".msg");
        
                    this.init()
                }
                init(){
                    var that = this;
                    this.btn.onclick = function(){
                        // 先获取指定的localStorage，用来判断是否是第一次注册
                        that.getUserMsg()
                    }
                }
                getUserMsg(){
                    this.usermsg = localStorage.getItem("usermsg");
                    // console.log(this.usermsg);
                    // 开始判断是否是第一次
                    this.setUserMsg()
                }
                setUserMsg(){
                    // localStorage中的数据的格式为:[{user:"admin",pass:1234,onoff:0},{user:"admin",pass:1234,onoff:0}]
                    // 如果是第一次，直接注册，如果不是第一次要判断是否重名
                    if(this.usermsg == null){
                        // 第一次
                        this.usermsg = [{
                            user:this.user.value,
                            pass:this.pass.value,
                            onoff:0
                        }]
                        // this.msg.innerHTML = "";
                    }else{
                        // 不是第一次:获取的同时，转成数组，然后开始判断是否重名
                        this.usermsg = JSON.parse(localStorage.getItem("usermsg"));
                        for(var i=0;i<this.usermsg.length;i++){
                            if(this.usermsg[i].user == this.user.value){
                                // this.msg.innerHTML = "重名";
                                return;
                            }
                        }
                        // this.msg.innerHTML = "";
                        this.usermsg.push({
                            user:this.user.value,
                            pass:this.pass.value,
                            onoff:0
                        })
                    }
        
                    localStorage.setItem("usermsg",JSON.stringify(this.usermsg))
                }
            }
        
            new Register;


            
        </script>
    
    </html>